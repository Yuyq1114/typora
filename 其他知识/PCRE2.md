# 介绍

### PCRE2 的基本概念

1. **Perl 兼容性**：
   - PCRE2 支持 Perl 正则表达式语法的大部分特性，使其成为一种非常强大的文本处理工具。它允许用户使用复杂的匹配模式和高级功能，如递归、回溯控制、命名捕获组等，这些都是 Perl 风格的特性。
2. **Unicode 支持**：
   - PCRE2 提供了全面的 Unicode 支持，允许正则表达式处理 Unicode 字符、属性和字符类。这对需要处理多语言文本的应用程序非常重要。
3. **多种字符编码支持**：
   - PCRE2 支持 8 位、16 位和 32 位字符编码，分别对应不同的库 (`libpcre2-8`, `libpcre2-16`, `libpcre2-32`)。这允许用户选择适合自己需求的字符编码方式。
4. **编译和执行正则表达式**：
   - 正则表达式可以在运行时进行编译，并被缓存或多次使用，减少了重复编译的开销。
   - 执行匹配时可以指定多种选项，比如全局匹配、局部匹配、贪婪或非贪婪模式等。
5. **错误处理**：
   - PCRE2 提供了详细的错误信息和调试功能，使得开发者在构建和测试复杂的正则表达式时可以轻松地找到问题。

### PCRE2 的主要特性

1. **递归和嵌套模式**：
   - PCRE2 支持递归匹配，可以在表达式中递归调用自身。这对解析结构化文本如 HTML、XML、嵌套的编程语言等非常有用。
2. **命名捕获组**：
   - 支持为捕获组命名，使得在大型正则表达式中更容易提取匹配的内容，而不需要依赖组的索引位置。
3. **回溯控制**：
   - PCRE2 允许开发者对回溯进行精细的控制，可以通过 `(*SKIP)` 和 `(*FAIL)` 等特性指定匹配失败的行为，避免不必要的回溯操作，提高匹配效率。
4. **条件表达式**：
   - PCRE2 允许在正则表达式中使用条件表达式，可以根据之前的匹配结果动态地调整匹配模式。
5. **支持多重匹配选项**：
   - 提供多种匹配选项，如区分大小写、不区分大小写、单行模式、多行模式、贪婪模式、非贪婪模式等，可以灵活调整匹配行为。
6. **内存管理和性能优化**：
   - PCRE2 对内存管理进行了优化，能够更好地控制内存使用，特别是在处理大型数据集或复杂表达式时。
   - 与 PCRE 相比，PCRE2 在性能上有所提升，特别是在多次匹配和大量数据处理场景中表现更佳。
7. **JIT 编译**：
   - PCRE2 支持 Just-In-Time (JIT) 编译，可以将正则表达式编译为机器码，提高执行速度。JIT 编译尤其适合频繁使用相同正则表达式的场景。

# 基本语法

1. **字面量字符**

   字符串中的普通字符会匹配自己。例如，正则表达式 `a` 匹配字符 `a`。

2. **特殊字符**

   - **`.`**: 匹配除换行符之外的任何单个字符。
   - **`\d`**: 匹配任何数字字符（等同于 `[0-9]`）。
   - **`\D`**: 匹配任何非数字字符。
   - **`\w`**: 匹配任何字母、数字或下划线（等同于 `[a-zA-Z0-9_]`）。
   - **`\W`**: 匹配任何非字母、非数字、非下划线字符。
   - **`\s`**: 匹配任何空白字符（如空格、制表符）。
   - **`\S`**: 匹配任何非空白字符。

3. **字符集和字符范围**

   - **`[abc]`**: 匹配字符 `a`、`b` 或 `c`。
   - **`[^abc]`**: 匹配除了 `a`、`b` 和 `c` 之外的任何字符。
   - **`[a-z]`**: 匹配范围内的任何字符，例如小写字母。
   - **`[A-Z]`**: 匹配范围内的任何字符，例如大写字母。

4. **量词**

   - **`\*`**: 匹配前面的元素零次或多次。
   - **`+`**: 匹配前面的元素一次或多次。
   - **`?`**: 匹配前面的元素零次或一次。
   - **`{n}`**: 匹配前面的元素恰好 `n` 次。
   - **`{n,}`**: 匹配前面的元素至少 `n` 次。
   - **`{n,m}`**: 匹配前面的元素至少 `n` 次，但不超过 `m` 次。

5. **分组和捕获**

   - **`(abc)`**: 捕获匹配的字符串 `abc`。
   - **`(?:abc)`**: 非捕获分组，匹配 `abc`，但不捕获它用于后续的引用。
   - **`(?P<name>abc)`**: 捕获分组，并给它一个名称 `name`，可以通过 `name` 引用它。

6. **断言**

   - **`^`**: 匹配输入字符串的开始。
   - **`$`**: 匹配输入字符串的结束。
   - **`(?=abc)`**: 正向前瞻断言，匹配 `abc` 之前的位置。
   - **`(?!abc)`**: 负向前瞻断言，匹配不为 `abc` 的位置。
   - **`(?<=abc)`**: 正向后顾断言，匹配 `abc` 之后的位置。
   - **`(?<!abc)`**: 负向后顾断言，匹配不为 `abc` 的位置。

7. **选择和分支**

   - **`a|b`**: 匹配 `a` 或 `b`。

8. **转义字符**

   - **`\`**: 用于转义字符。例如，`\.` 匹配字面上的句点字符，而不是任意字符。

9. **特殊模式**

   - **`(?i)`**: 忽略大小写。
   - **`(?m)`**: 多行模式，使 `^` 和 `$` 匹配每行的开始和结束。
   - **`(?s)`**: 单行模式，使 `.` 匹配包括换行符在内的所有字符。
   - **`(?x)`**: 扩展模式，允许在正则表达式中使用空白字符和注释。