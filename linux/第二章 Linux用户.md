# 第一节 root用户

root拥有最大的操作系统权限

普通用户在其home目录内不受限，出了home只读和执行，无修改权限

## su切换用户

su（Substitute User）命令用于切换用户身份。通常用于以其他用户的身份执行命令，尤其是以超级用户（root）的身份执行操作。使用 su 可以在不退出当前会话的情况下临时切换到其他用户账户

su [选项] [用户] [参数...]

-：切换用户并加载目标用户的环境变量，相当于 -l 或 --login。
-c：执行指定的命令并退出。
-m 或 -p：保留当前用户的环境变量。
-s：指定要使用的 shell。

## sudo命令

sudo（superuser do）命令用于以超级用户（root）或其他用户的权限执行命令。它是一种更加安全和灵活的权限提升方式，通常用于临时执行需要超级用户权限的操作，而无需完全切换到 root 用户。

sudo [选项] 命令

-u：指定以哪个用户的身份执行命令。默认是 root。
-k：重置 sudo 的时间戳，要求下次运行时重新输入密码。
-s：以目标用户的 shell 执行命令。
-i：模拟目标用户的登录环境执行命令。
-l：列出当前用户可以运行的命令。
-v：更新 sudo 的时间戳，延长当前授权的有效期。
-b：在后台执行命令。

sudo 的配置文件是 /etc/sudoers，需要使用 visudo 命令进行编辑以避免语法错误：



# 第二节 用户和用户组

## 用户组 group

**groupadd 命令，用于添加新用户组。**

groupadd [选项] 组名。-g：指定组 ID。

**groupmod 命令用于修改现有用户组的信息。**

groupmod [选项] 组名 - n：修改组名。 -g：修改组 ID。

**groupdel 命令用于删除用户组。**
groupdel 组名

**gpasswd 命令用于管理组密码和组管理员。**
gpasswd [选项] 组名

-a：添加用户到组。
-d：从组中删除用户。
-A：指定组管理员。
-r：移除组密码。

## 用户user

**useradd 命令用于添加新用户。**

useradd [选项] 用户名

-m：自动创建用户的主目录。
-d：指定用户的主目录。
-s：指定用户的登录 shell。
-c：添加注释（用户描述）。
-G：指定用户所属的附加组。

**usermod 命令用于修改现有用户的信息。**

usermod [选项] 用户名

-l：修改用户名。
-d：修改用户的主目录。
-s：修改用户的登录 shell。
-c：修改用户的注释。
-G：修改用户所属的附加组。
-aG：添加用户到附加组而不删除现有组。

**userdel 命令用于删除用户。**

userdel [选项] 用户名

-r：删除用户的主目录及其内容。

**passwd 命令用于更改用户密码。**

passwd [用户名]

## 查询用户和组信息命令

**id 命令**
用于显示当前用户或指定用户的 UID、GID 及其所属组信息。
id [用户名]

**groups 命令**
用于显示当前用户或指定用户所属的组。
groups [用户名]

**getent 命令**
用于查询系统数据库中的信息，如用户、组、主机名等。
getent passwd [用户名]
getent group [组名]



# 第三节 查看权限控制信息

## 权限控制基础

权限控制主要通过所有者（Owner）、所属组（Group）和其他用户（Others）这三个角色来实现。

每个文件和目录都有三组权限：用户权限（Owner）、组权限（Group）、其他用户权限（Others）。每组权限包含三种类型：读（r）、写（w）和执行（x）。

符号模式: rwxr-xr--
数字模式: 755

## 修改权限chmod

chmod 命令用于修改文件或目录的权限。

chmod [选项] 模式 文件

**符号模式：**
chmod u+rwx,g+rx,o+r file.txt

**数字模式：**
chmod 755 file.txt

-R: 递归更改目录及其内容的权限

## 更改所有者chown

chown 命令用于更改文件或目录的所有者和所属组。

chown [选项] 用户:组 文件

-R: 递归更改目录及其内容的所有者和所属组

## 更改所属组chgrp

chgrp 命令用于更改文件或目录的所属组。

chgrp [选项] 组 文件

-R: 递归更改目录及其内容的所属组

## 特殊权限

**SUID (Set User ID)**

文件以文件所有者的权限执行，而不是执行者的权限。常用于程序需要临时提升权限执行特定任务。

chmod u+s file 设置 SUID：

**SGID (Set Group ID)**

目录内新创建的文件继承目录的组，而不是创建者的默认组。也可用于程序，以文件组的权限执行。

chmod g+s file 设置 SGID：

**Sticky Bit**

只允许文件所有者或 root 删除或修改文件。常用于公共目录如 /tmp。

chmod +t directory
